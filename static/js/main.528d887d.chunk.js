(this.webpackJsonpvredditor=this.webpackJsonpvredditor||[]).push([[0],{38:function(e,t,n){e.exports=n(47)},43:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i),c=n(21),l=n(35),u=(n(43),n(7)),s=n(30),d=n(23),m=n(10),v=n(6),f=n(34),p=n(9),h=n(36),E=function(e){var t=e.input,n=e.meta,a=e.children,i=Object(u.a)(e,["input","meta","children"]),o=n.error||n.submitError,c=n.invalid&&!n.dirtySinceLastSubmit&&n.touched&&!n.active;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Control,Object.assign({isInvalid:c},t,i),a),c&&r.a.createElement(v.a.Control.Feedback,{type:"invalid"},o))},b=function(e){var t=e.input,n=e.meta,a=Object(u.a)(e,["input","meta"]),i=n.error||n.submitError,o=n.invalid&&!n.dirtySinceLastSubmit&&n.touched&&!n.active,c=(t.type,Object(u.a)(t,["type"]));return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Check,Object.assign({isInvalid:o,type:"checkbox"},c,a,{checked:!!c.value})),o&&r.a.createElement(v.a.Control.Feedback,{type:"invalid"},i))},g=n(19),y=n(32),O=function(e){var t=e.loading,n=e.loadingMessage,a=e.message,i=e.spinnerProps,o=void 0===i?{}:i,c=Object(u.a)(e,["loading","loadingMessage","message","spinnerProps"]);return r.a.createElement(g.a,c,t&&r.a.createElement(y.a,Object.assign({size:"sm",animation:"border",role:"status","aria-hidden":"true"},o)),t?n:a)},k=n(37),w=n(33),j=function(e){var t=/v\.redd\.it\/([A-Za-z0-9]+)/.exec(e);if(2===(null===t||void 0===t?void 0:t.length))return t[1]},L=function(e){return new Promise((function(t,n){/v\.redd\.it\/([A-Za-z0-9]+)/.test(e)?t(e):/(m|old)?\.?reddit\.com\/r\/.*?\/comments/.test(e)?function(e){return new Promise((function(t,n){return fetch("//cors-anywhere.herokuapp.com/".concat(e)).then((function(e){return e.text()})).then((function(e){var a=/(https:\/\/v\.redd\.it\/[A-Z0-9a-z]+)/.exec(e);!a||(null===a||void 0===a?void 0:a.length)<2?n(new Error("Failed to find v.redd.it url in link; is it a video?")):t(a[1])}))}))}(e).then((function(e){return t(e)})).catch((function(e){return n(e)})):n(new Error("Couldn't get a reddit link from that. Please email me@brod.es if this is a valid reddit link."))}))},S=function e(t,n,a,r,i){var o=Object(w.a)(t),c=o[0],l=o.slice(1),u={once:""},s=function(t){if(m(),u.once=t.type,v(),0===l.length)return r(n);setTimeout((function(){u.once===t.type&&e(l,n,a,r,i)}),500)},d={abort:s,error:s,loadedmetadata:function(t){m(),v();var o=[].concat(Object(k.a)(n),[c]);if(0===l.length||i.resolveOnFirst)return r(o);setTimeout((function(){e(l,o,a,r,i)}),500)}},m=function(){return Object.keys(d).map((function(e){return a.removeEventListener(e,d[e])}))},v=function(){a.src=void 0};Object.keys(d).map((function(e){return a.addEventListener(e,d[e])})),a.src=c},F=function(e){return function(t){var n=t.url,a=t.resolveOnFirst;return new Promise((function(t){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{resolveOnFirst:!1};return new Promise((function(n,a){return L(e).then((function(e){var a=j(e);if(void 0===a)throw new Error("could not get id from vreddit url");var r=["1080","720","480","360","96"].map((function(e){return"https://v.redd.it/".concat(a,"/DASH_").concat(e,".mp4")})),i=document.createElement("video");S(r,[],i,n,t)})).catch((function(e){return a(e)}))}))})(n,{resolveOnFirst:a}).then((function(n){e(n),t()})).catch((function(e){t(Object(s.a)({},m.a,e))}))}))}},C=function(e){var t=e.handleSubmit,n=e.submitting,a=e.pristine,i=e.dirtySinceLastSubmit,o=e.invalid,c=e.error,l=e.submitError,u=e.submitErrors,s=l||c,g=!(void 0!==u&&void 0!==u[m.a])&&!i;return r.a.createElement(v.a,{onSubmit:t},s&&r.a.createElement(h.a,{variant:"danger"},"".concat(s)),r.a.createElement(f.a,{sm:"12",md:"8"},r.a.createElement(v.a.Group,{as:p.a,md:"12",lg:"8"},r.a.createElement(v.a.Label,null,"URL"),r.a.createElement(d.a,{component:E,name:"url",type:"text",placeholder:"https://v.redd.it/asdf1234"}),r.a.createElement(v.a.Text,{className:"text-muted"},"Provide a comments link for a v.redd.it video or a v.redd.it video link.")),r.a.createElement(v.a.Group,{as:p.a,md:"12",lg:"8"},r.a.createElement(d.a,{component:b,name:"resolveOnFirst",label:"Return only the highest quality video"})),r.a.createElement(p.a,{md:"8"},r.a.createElement(O,{variant:"primary",type:"submit",message:"Convert",loading:n,loadingMessage:"Converting...",disabled:n||a||o&&g}))))},x=function(e){var t=e.url;Object(u.a)(e,["url"]);if(!t||t.length<3)return{url:"A valid URL is required"};try{new URL(t)}catch(n){return{url:"This isn't a valid URL. It should be in the format https://v.redd.it/asdf1234xyz"}}return{}},P=function(e){var t=e.setURLs;return r.a.createElement(d.b,{onSubmit:F(t),validate:x,render:C,initialValues:{resolveOnFirst:!0}})},R=n(26),A=n(18),N=n(27),z=function(e){var t=e.value,n=e.displayValue,i=Object(u.a)(e,["value","displayValue"]),o=Object(a.useState)(!1),l=Object(c.a)(o,2),s=l[0],d=l[1],m=Object(a.useRef)(null),v=void 0===n||n;return r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"copy-group"},r.a.createElement(A.a,Object.assign({className:"copy-only",onClick:function(){var e;return null===(e=m.current)||void 0===e?void 0:e.select()},value:t,ref:m,style:v?{}:{display:"none"},readOnly:!0},i)),r.a.createElement(R.a.Append,null,r.a.createElement(U,{isLoading:s,onClick:function(e){(null===m||void 0===m?void 0:m.current)&&(d(!0),v||(m.current.style.display="block"),m.current.select(),document.execCommand("copy"),v||(m.current.style.display="none"),e.target.focus(),setTimeout((function(){return d(!1)}),1e3))}}))))},U=function(e){var t=e.isLoading,n=e.onClick;return r.a.createElement(g.a,{onClick:n,variant:"outline-success"},t?r.a.createElement(N.a,null):r.a.createElement(N.b,null))},T=function(e){var t=e.url;return r.a.createElement("video",{src:t,width:"240",height:"auto"})},I=function(e){var t=e.urls,n=e.video;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(T,{url:t[0]}),r.a.createElement("div",{className:"mt-3"}),t.map((function(e){return r.a.createElement(p.a,{md:"8"},r.a.createElement(v.a.Group,null,r.a.createElement(z,{value:e,displayValue:!0}),r.a.createElement(v.a.Label,null,function(e){var t=/DASH_([0-9]+)\.([a-z0-9]{1,5})/.exec(e);return 3===(null===t||void 0===t?void 0:t.length)?"".concat(t[1],"p ").concat(t[2]," video"):2===(null===t||void 0===t?void 0:t.length)?"".concat(t[1],"p video"):"unknown quality"}(e),"\xa0 (",r.a.createElement("a",{href:e,target:"_blank"},"preview"),")")))})))},M=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],i=t[1];return r.a.createElement(l.a,{className:"app"},r.a.createElement("h2",{className:"app-header pt-md-5 mb-3"},"v.redd.it converter"),r.a.createElement(P,{setURLs:i}),r.a.createElement("div",{className:"mt-5"},null!==n&&r.a.createElement(I,{urls:n,video:!0})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.528d887d.chunk.js.map